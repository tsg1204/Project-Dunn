<!DOCTYPE html>
<html>
<head>
  <title>Bars</title>
  <script src="https://d3js.org/d3.v3.min.js"></script>
</head>
<style>
  #title {
    text-align: center;
    font-family: Arial;
  }
  .container {
    width: 90%;
    margin: auto;
  }
  .chart-container {
    display: inline-block;
  }
  .chart {
    margin: 25px;
    padding: 40px;
  }
  .class-chart, .state-chart {
    padding-left: 50px;
  }
  .class-chart {
    fill: #006a89;
  }
  .state-chart {
    fill: #00b6ba;
  }
  .title {
    text-align: center;
    font-size: 2em;
    font-family: Arial;
  }
  g.x text {
    transform: rotate(-45deg);
    text-anchor: end;
    margin: 5px;
  }
  .bar-group:hover {
    fill: lightblue;
  }
  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: auto;
  }

  .axis text {
    font-size: 18px;
  }

  .chart .current {
    fill: green;
    cursor: pointer;
  }
</style>
<body>
  <h1 id="title">Your Class Stats vs. State Stats</h1>
  <div class="container">
    <div class="chart chart-container">
      <svg class="class-chart"></svg>
    </div>
    <div class="chart chart-container">
      <svg class="state-chart"></svg>
    </div>
  </div>
</body>
</html>

<script>
var classData = [
  {name: 'Min', value: 36},
  {name: 'Max', value: 91},
  {name: 'Avg', value: 77},
  {name: 'Rng', value: 55},
  {name: 'Med', value: 80}
];

var stateData = [
  {name: 'Min', value: 8},
  {name: 'Max', value: 100},
  {name: 'Avg', value: 73},
  {name: 'Rng', value: 92},
  {name: 'Med', value: 78}
];


var svgHeight = 400;
var svgWidth = 400;
var maxScore = 100; 
var barSpacing = 1; 
var padding = {
    left: 20, right: 0,
    top: 20, bottom: 40
};

function animateClass() {
  var maxWidth = svgWidth - padding.left - padding.right;
  var maxHeight = svgHeight - padding.top - padding.bottom;

  // Define your conversion functions
  var convert = {    
    x: d3.scale.ordinal(),
    y: d3.scale.linear()
  };

  // Define your axis
  var axis = {
    x: d3.svg.axis().orient('bottom'),
    y: d3.svg.axis().orient('left')
  };
    
  // Define the conversion function for the axis points
  axis.x.scale(convert.x);
  axis.y.scale(convert.y);

  // Define the output range of your conversion functions
  convert.y.range([maxHeight, 0]);
  convert.x.rangeRoundBands([0, maxWidth]);
    
  convert.x.domain(classData.map(function (d) {
      return d.name;
    })
  );
  convert.y.domain([0, maxScore]);

  var svg = d3.select('.class-chart')
    .attr({
        width: svgWidth,
        height: svgHeight
    });
  
  var chart = svg.append('g')
    .attr({
        transform: function (d, i) {
          return 'translate(' + padding.left + ',' + padding.top + ')';
        }
      });
    
  chart.append('g') 
    .attr({
      class: 'x axis',
      transform: 'translate(0,' + maxHeight + ')'
    })
    .call(axis.x); 

  chart.append('g') 
    .attr({
      class: 'y axis',
      height: maxHeight
    })
    .call(axis.y);

  var bars = chart
    .selectAll('g.bar-group')
    .data(classData)
    .enter()
    .append('g')
    .text(function(d){return d.value})
    .attr({
      transform: function (d, i) {
        return 'translate(' + convert.x(d.name) + ', 0)';
      },
      class: 'bar-group'
    });

  bars.append('rect')
        .attr({
        y: maxHeight,
        height: 0,
        width: function(d) {return convert.x.rangeBand(d) - 1;},
        class: 'bar'
    })
    .transition()
    .duration(1500)
    .attr({
      y: function (d, i) {
        return convert.y(d.value);
      },
      height: function (d, i) {
        return maxHeight - convert.y(d.value);
      }
    });

  return chart;
}

function animateState() {

  var maxWidth = svgWidth - padding.left - padding.right;
  var maxHeight = svgHeight - padding.top - padding.bottom;
  
  var convert = {    
    x: d3.scale.ordinal(),
    y: d3.scale.linear()
  };

  var axis = {
    x: d3.svg.axis().orient('bottom'),
    y: d3.svg.axis().orient('left')
  };

  axis.x.scale(convert.x);
  axis.y.scale(convert.y);

  convert.y.range([maxHeight, 0]);
  convert.x.rangeRoundBands([0, maxWidth]);
    
  convert.x.domain(stateData.map(function (d) {
      return d.name;
    })
  );
  convert.y.domain([0, maxScore]);

  var svg = d3.select('.state-chart')
    .attr({
        width: svgWidth,
        height: svgHeight
    });
  
  var chart = svg.append('g')
    .attr({
        transform: function (d, i) {
          return 'translate(' + padding.left + ',' + padding.top + ')';
        }
      });
    
  chart.append('g') 
    .attr({
      class: 'x axis',
      transform: 'translate(0,' + maxHeight + ')'
    })
    .call(axis.x); 

  chart.append('g') 
    .attr({
      class: 'y axis',
      height: maxHeight
    })
    .call(axis.y); 

  var bars = chart
    .selectAll('g.bar-group')
    .data(stateData)
    .enter()
    .append('g') 
    .attr({
      transform: function (d, i) {
        return 'translate(' + convert.x(d.name) + ', 0)';
      },
      class: 'bar-group'
    });

  bars.append('rect')
        .attr({
        y: maxHeight,
        height: 0,
        width: function(d) {return convert.x.rangeBand(d) - 1;},
        class: 'bar'
    })
    .transition()
    .duration(1500)
    .attr({
      y: function (d, i) {
        return convert.y(d.value);
      },
      height: function (d, i) {
        return maxHeight - convert.y(d.value);
      }
    });

  return chart;
}

animateClass(); 
animateState();

</script>